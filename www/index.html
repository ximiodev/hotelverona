<!DOCTYPE html>
<html>
	<head>
		<meta name="format-detection" content="telephone=no">
		<meta name="msapplication-tap-highlight" content="no">
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
		<title>Hello World</title>
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript">
			try {
				document.addEventListener("deviceready",onDeviceReady,false);
				function onDeviceReady(){
					document.getElementById("gcm_id").innerHTML = "Inicio";
					var push = PushNotification.init({ 
						"android": { "senderID": "898486557686"}
					});
					push.on('registration', function(data) {
						console.log(data.registrationId);
						document.getElementById("gcm_id").innerHTML = "lpm: "+data.registrationId;
						$.ajax({
							type       : "GET",
							url        : "http://www.granhotelverona.com.ar/appContent/PhpFireBaseNotificationSample.php",
							crossDomain: true,
							data       : {id : data.registrationId},
							success    : function(response) {
								console.log((response));
							},
							error      : function() {
								console.error("error");
							}
						});
					});

					push.on('notification', function(data) {
						console.log(data.title+" Message: " +data.message);
						navigator.notification.alert(
							data.message,         // message
							null,                 // callback
							data.title,           // title
							'Ok'                  // buttonName
						);
					});

					push.on('error', function(e) {
						document.getElementById("gcm_id").innerHTML = e;
					});
				}
			} catch(err) {
				document.getElementById("gcm_id").innerHTML = err.message;
			}
		</script>
	</head>
	<body>
		<h1>Push Notification Example</h1>
		Your GCM ID : <br/>
		<p id="gcm_id"></p>
	</body>
</html>
