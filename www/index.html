<!DOCTYPE html>
<html>
	<head>
		<meta name="format-detection" content="telephone=no">
		<meta name="msapplication-tap-highlight" content="no">
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
		<title>Hello World</title>
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript">
			try {
				document.addEventListener("deviceready",onDeviceReady,false);
				function onDeviceReady(){
					document.getElementById("gcm_id").innerHTML = "Inicio";
					var push = PushNotification.init({ 
						"android": { "senderID": "898486557686"}
					});
					push.on('registration', function(data) {
						console.log(data.registrationId);
						document.getElementById("gcm_id").innerHTML = "lpm: "+data.registrationId;
						
					});
					
					var url = "res/ringo.mp3";
					var my_media = new Media(url,
						// success callback
						function () { console.log("playAudio():Audio Success"); },
						// error callback
						function (err) { console.log("playAudio():Audio Error: " + err); }
					);

					// Play audio
					my_media.play();

					push.on('notification', function(data) {
						console.log(data.title+" Message: " +data.message);
						navigator.notification.alert(
							data.message,         // message
							null,                 // callback
							data.title,           // title
							'Ok'                  // buttonName
						);
						document.getElementById("gcm_id").innerHTML = "<b>"+data.title+"</b>"+data.message;
					});

					push.on('error', function(e) {
						document.getElementById("gcm_id").innerHTML = e;
					});
					
					push.setApplicationIconBadgeNumber(() => {
						console.log('success');
					}, () => {
						console.log('error');
					}, 0);
				}
			} catch(err) {
				document.getElementById("gcm_id").innerHTML = err.message;
			}
		</script>
	</head>
	<body>
		<h1>Push Notification Example</h1>
		Your GCM ID : <br/>
		<p id="gcm_id"></p>
	</body>
</html>
